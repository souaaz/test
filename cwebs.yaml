swagger: '2.0'
info:
  title: CWEBS API
  version: "0.1"

host: 10.10.1.239:8889
basePath: '/'
schemes:
   - http
   - https

consumes:
  - application/json
produces:
  - application/json
security:
  # enable OAuth protection for all REST endpoints
  # (only active if the TOKENINFO_URL environment variable is set)
  - oauth2: [uid]
  - apiKeySecurity: []


#GET_FLEET_RESOURCE_NAME = '/dispatcher/qtotals/'
#GET_ZONE_RESOURCE_NAME = '/dispatcher/zonestatus/'
#GET_ZONE_SET_RESOURCE_NAME = '/dispatcher/zonevehicles/'
#GET_ZONE_SET_ZONES_RESOURCE_NAME = '/dispatcher/zonesetzones/'

#POST_CANCEL_BOOK_ORDER = '/dispatcher/cancel_book_order/'
#POST_SAVE_BOOK_ORDER = '/dispatcher/save_book_order/'
#POST_MODIFY_BOOK_ORDER = '/dispatcher/modify_book_order/'
#POST_REDISPATCH_BOOK_ORDER = '/dispatcher/redispatch_book_order/'
#POST_PROMPT_VALIDATE = '/account/validate/'
#POST_DEVICE_SEND_MSG = '/device/sendmsg/'
#POST_DEVICE_CODED_MESSAGE = '/supervisor/action/'
#POST_CLEAR_EMERGENCY = '/device/clear_emergency/'
#GET_DRIVER_SUSPEND_LIST = '/driver/suspend_list/'
#POST_VEHICLE_SEND_MESSAGE = '/message/send_vehicle_msg/'
#POST_FLEET_SEND_MESSAGE = '/message/send_fleet_msg/'
#POST_DRIVER_SEND_MESSAGE = '/message/send_driver_msg/'
#POST_FLEET_ACTION = '/fleet/action/'
#POST_UPDATE_FARE = '/dispatcher/update_fare/'

#GET_FARE_INFO = '/fares/read_book_order/'

#PLUS
#POST /account/MDT_check/
#POST /update_payment_type/
#GET /zone_by_gps/
#GET /dispatcher/zonestatus/<fleet_number> 
#POST /message/callout_response/
#POST /update_destination/


#/fares/search_payment/ 
#/fares/search_source/ 


parameters:
  account_number:
    name: account_number
    description: account number
    in: path
    type: integer
    format: int32
  customer_number:
    name: customer_number
    description: customer number
    in: path
    type: integer
    format: int32
  fleet_number:
    name: fleet_number
    description: fleet number
    in: path
    type: integer
    format: int32

paths:

  /cwebs/version/:
    get:
      tags: [CWEBS]
      operationId: app.get_version
      summary: Get Version
      
      responses:
        200:
          description: Return version
          schema:
            type: string
        default:
          description: Unexpected error
          schema:
            $ref: '#/definitions/Error'            

 

  /fares/read_book_order/: 
    post:
      tags: [CWEBS , dispatcher]      
      summary: Get 1 fare
      operationId: app.get_fare
      description: read 1 fare                 
      parameters:
        - name: fare
          in: body
          description: fare fare_number
          schema:
            type: object
            required:             
              - fare_number
            properties:

              fare_type:
                type: string
              fare_number:
                type: string
              via_requested:
                type: boolean
      responses:
        200:
          description: A fare        
          schema:
            $ref: '#/definitions/FareCreated'      

        400:
          description: Fare does not exist
        default:
          description: Unexpected error
          schema:
            $ref: '#/definitions/Error'            

  /dispatcher/save_book_order/:
    post:
      tags: [CWEBS, dispatcher]      
      summary: Creates a fare
      operationId: app.post_fare  
      description: Adds a new fare
      parameters:
        - name: fare
          in: body
          description: Adds a new fare.
          schema:
            $ref: "#/definitions/FareCreation"
          required: true
      responses:
        200:
          description: Return fare created
          schema:
            $ref: '#/definitions/FareCreated'              
        400:
          description: Fare could not be created.

        default:
          description: Unexpected error
          schema:
            $ref: '#/definitions/Error'         

  /dispatcher/modify_book_order/:
    post:
      tags: [CWEBS, dispatcher]      
      summary: Modifies a fare
      operationId: app.modify_fare
      description: Modifies a fare
      parameters:
        - name: fare
          in: body
          description:  Modifies a fare
          schema:
            $ref: "#/definitions/FareModification"
      responses:
        200:
          description: Return fare 
          schema:
            $ref: '#/definitions/FareCreated'              
        400:
          description: Fare could not be modified.
        default:
          description: Unexpected error
          schema:
            $ref: '#/definitions/Error'         

  /dispatcher/cancel_book_order/:
    post:
      tags: [CWEBS, dispatcher]      
      summary: Cancels a fare
      operationId: app.cancel_fare
      description: Cancels a new fare
      parameters:
        - name: fare
          in: body
          description: Cancels a fare.
          schema:
            $ref: "#/definitions/FareCancelation"
      responses:
        200:
          description: Return fare cancel
          schema:
            $ref: '#/definitions/FareCanceled'              
        500:
          description: Fare could not be canceled.
        default:
          description: Unexpected error
          schema:
            $ref: '#/definitions/Error' 

  /dispatcher/redispatch_book_order/:
    post:
      tags: [CWEBS, dispatcher]      
      summary: Redispatches a fare
      operationId: app.redispatch_fare
      description:  Redispatches a fare
      parameters:
        - name: fare
          in: body
          description:  Redispatches a fare
          schema:
            $ref: "#/definitions/FareCancelation"
      responses:
        200:
          description: Return a new fare 
          schema:
            $ref: '#/definitions/FareCreated'              
        400:
          description: Fare could not be redispatched
        default:
          description: Unexpected error
          schema:
            $ref: '#/definitions/Error' 


  /message/send_driver_msg/:
    post:
      tags: [CWEBS]      
      summary: Message to driver 
      operationId: app.send_driver_msg
      description: Message to driver 
      parameters:
        - name: driver_msg
          in: body
          description: Adds a new mesg
          schema:
            $ref: "#/definitions/DriverMsg"
      responses:
        200:
          description: Message to driver succesfully sent.
        400:
          description: Message could not be sent.
        default:
          description: Unexpected error
          schema:
            $ref: '#/definitions/Error'         

  /message/send_vehicle_msg/:
    post:
      tags: [CWEBS]      
      summary: Message to vehicle 
      operationId: app.send_vehicle_msg
      description: Message to vehicle
      parameters:
        - name: vehicle_msg
          in: body
          description: Adds a new mesg
          schema:
            $ref: "#/definitions/VehicleMsg"
      responses:
        200:
          description: Message to vehicle succesfully sent.
        400:
          description: Message could not be sent.
        default:
          description: Unexpected error
          schema:
            $ref: '#/definitions/Error'         

  /message/send_fleet_msg/:
    post:
      tags: [CWEBS]      
      summary: Message to fleet 
      operationId: app.send_fleet_msg
      description: Message to fleet
      parameters:
        - name: fleet_msg
          in: body
          description: Adds a new mesg
          schema:
            $ref: "#/definitions/FleetMsg"
      responses:
        200:
          description: Message to fleet succesfully sent.
        400:
          description: Message could not be sent.
        default:
          description: Unexpected error
          schema:
            $ref: '#/definitions/Error'         

  /dispatcher/update_fare/:
    post:
      tags: [CWEBS]      
      summary: Update fare
      operationId: app.update_fare
      description: update fare
      parameters:
        - name: fare
          in: body
          description: Update Fare Status
          schema:
            $ref: "#/definitions/UpdateFare"
      responses:
        200:
          description: success
        400:
          description: Update did not succeed.
        default:
          description: Unexpected error
          schema:
            $ref: '#/definitions/Error'         

  /driver/action/:
    post:
      tags: [CWEBS]      
      summary: Update, Add, Delete a driver 
      operationId: app.driver_action
      description: Update, Add a driver
      parameters:
        - name: action_params
          in: body
          description: driver params
          schema:
            $ref: "#/definitions/ActionDriverData"
      responses:
        200:
          description: success
        400:
          description: Error 
        default:
          description: Unexpected error
          schema:
            $ref: '#/definitions/Error'         

  /fleet/action/:
    post:
      tags: [CWEBS]      
      summary: Update, Add, Delete a fleet
      operationId: app.fleet_action
      description: Update, Add a fleet
      parameters:
        - name: action_params
          in: body
          description: fleet params
          schema:
            $ref: "#/definitions/ActionFleetData"
      responses:
        200:
          description: success
        400:
          description: Error 
        default:
          description: Unexpected error
          schema:
            $ref: '#/definitions/Error'         

  /supervisor/action/:
    post:
      tags: [CWEBS]      
      summary:  suspend and reinstate drivers
      operationId: app.supervisor_action
      description: suspend and reinstate drivers
      parameters:
        - name: action_params
          in: body
          description: action params
          schema:
            $ref: "#/definitions/ActionSupervisorData"
      responses:
        200:
          description: success
        400:
          description: Error 
        default:
          description: Unexpected error
          schema:
            $ref: '#/definitions/Error'         

  /vehicle/action/:
    post:
      tags: [CWEBS]
      summary: Update, Add, Delete, Suspend, Reinstate a vehicle
      operationId: app.vehicle_action
      description: Update, Add a vehicle
      parameters:
        - name: action_params
          in: body
          description: vehicle params
          schema:
            $ref: "#/definitions/ActionVehicleData"
      responses:
        200:
          description: success
        400:
          description: Error 
        default:
          description: Unexpected error
          schema:
            $ref: '#/definitions/Error'         


  /vehicle/suspend_list/:
    get:
      tags: [CWEBS]
      operationId: app.vehicle_suspend_list
      summary: List of suspended vehicles      
      responses:
        200:
          description: Return version
          schema:
            $ref: '#/definitions/SuspensionVehicleListResponse'    
        default:
          description: Unexpected error
          schema:
            $ref: '#/definitions/Error'         

  /driver/suspend_list/:
    get:
      tags: [CWEBS]
      operationId: app.driver_suspend_list
      summary: List of suspended drivers
      
      responses:
        200:
          description: Return version
          schema:
            $ref: '#/definitions/SuspensionDriverListResponse'      
        default:
          description: Unexpected error
          schema:
            $ref: '#/definitions/Error'         

  /account/corporate/{account_number}/{customer_number}/:
    parameters:
      - $ref: '#/parameters/account_number'
      - $ref: '#/parameters/customer_number'
    get:
      tags: [CWEBS, account]
      operationId: app.get_corporate_account
      summary: Retrieve corporate accounts
      description: bla bla

      responses:
        200:
          description: Return corporate
          schema:
            type: string      
        400:
          description: Error 
        default:
          description: Unexpected error
          schema:
            $ref: '#/definitions/Error'  

  /account/corporate/all/:
    get:
      tags: [CWEBS, account]
      operationId: app.get_all_accounts
      summary: Read All accounts
      description: Read All accounts

      responses:
        200:
          description: success
          schema:
            $ref: '#/definitions/Accounts'
        400:
          description: Error 
        default:
          description: Unexpected error
          schema:
            $ref: '#/definitions/Error'  

  /account/validate/: 
    post:
      tags: [CWEBS, account]
      operationId: app.validate_account
      summary: validate account
      description: validate account
      parameters:
        - name: account
          in: body
          schema:
            type: object
            properties:
              account_number:
                type: string
                minLength: 2
                default: 5000
              customer_number:
                type: integer
                format: int32    
                default: 0        
              prompts:
                type: array
                items: 
                  type: string
                  minItems: 0              
      responses:
        200:
          description: success
          schema:
            $ref: '#/definitions/AccountValidResult'
        400:
          description: Error 
        default:
          description: Unexpected error
          schema:
            $ref: '#/definitions/Error'  


  /device/sendmsg/:
    post:
      tags: [CWEBS, message]
      operationId: app.send_device_msg
      summary: send device msg
      description: send device msg
      parameters:
        - name: vehicle
          in: body
          schema:
            type: object
            properties:
              vehicle_id:
                type: integer
                format: int32
                default: 8089
              company_id:
                type: integer
                format: int32            
                default: 1
              msgtext:
                type: string
                default: 'sample text msg'
              device:
                type: string 
                default: "vehicle"          

      responses:
        200:
          description: success
        400:
          description: Error 
        default:
          description: Unexpected error
          schema:
            $ref: '#/definitions/Error'  

  /device/clear_emergency/:
    post:
      tags: [CWEBS, message]
      operationId: app.clear_emergency
      summary: clear_emergency
      description: clear_emergency
      parameters:
        - name: vehicle
          in: body
          schema:
            type: object
            properties:
              taxi:
                type: integer
                format: int32
                default: 8089
              operator_id:
                type: integer
                format: int32
                default: 1200            
              fleet:                
                type: integer
                format: int32
                default: 2            
      responses:
        200:
          description: success
        400:
          description: Error 
        default:
          description: Unexpected error
          schema:
            $ref: '#/definitions/Error'  

  /dispatcher/zonevehicles/:
    get:
      tags: [CWEBS, zone]
      operationId: app.get_zonevehicles
      summary: zone vehicles
      description: zone vehicles          
      responses:
        200:
          description: success
        400:
          description: Error 
        default:
          description: Unexpected error
          schema:
            $ref: '#/definitions/Error'   

  /update_fare_amount/:
    post:
      tags: [CWEBS]
      operationId: app.update_fare_amount
      summary: update_fare_amount
      description: update_fare_amount        
      parameters:
        - name: fare
          in: body
          schema:
            type: object
            properties:
              flat_rate:
                type: integer
                format: int32
              fare_number:
                type: string
            
      responses:
        200:
          description: success
        400:
          description: Error 
        default:
          description: Unexpected error
          schema:
            $ref: '#/definitions/Error'  

  ##???
  /dispatcher/qtotals/:
    get:
      tags: [CWEBS, zone]
      operationId: app.get_qtotals
      summary: zone vehicles
      description: zone vehicles          
      responses:
        200:
          description: success
        400:
          description: Error 
        default:
          description: Unexpected error
          schema:
            $ref: '#/definitions/Error'   

  /dispatcher/zonestatus/{fleet_number}/:
    parameters:
      - $ref: '#/parameters/fleet_number'    
    get:
      tags: [CWEBS, zone]
      operationId: app.get_zonestatus
      summary: zone vehicles
      description: zone vehicles          
      responses:
        200:
          description: success
        400:
          description: Error 
        default:
          description: Unexpected error
          schema:
            $ref: '#/definitions/Error'   

  /dispatcher/zonesetzones/:
    get:
      tags: [CWEBS, zone]
      operationId: app.get_zonesetzones
      summary: zone vehicles
      description: zone vehicles          
      responses:
        200:
          description: success
        400:
          description: Error 
        default:
          description: Unexpected error
          schema:
            $ref: '#/definitions/Error'   


  /message/callout_response/:
    post:
      tags: [CWEBS]
      operationId: app.callout_response
      summary: update_fare_amount
      description: update_fare_amount        
      parameters:
        - name: fare
          in: body
          schema:
            type: object
            properties:
              flat_rate:
                type: integer
                format: int32
              fare_number:
                type: string                  

      responses:
        200:
          description: success
        400:
          description: Error 
        default:
          description: Unexpected error
          schema:
            $ref: '#/definitions/Error'  

  /update_destination/:
    post:
      tags: [CWEBS]
      operationId: app.update_destination
      summary: update_fare_amount
      description: update_fare_amount        
      parameters:
        - name: fare
          in: body
          schema:
            type: object
            properties:
              flat_rate:
                type: integer
                format: int32
              fare_number:
                type: string                  
      responses:
        200:
          description: success
        400:
          description: Error 
        default:
          description: Unexpected error
          schema:
            $ref: '#/definitions/Error'  


  /account/MDT_check/:
    post:
      tags: [CWEBS, account]
      operationId: app.mdt_check
      summary: MDT check
      description: MDT check      
      parameters:
        - name: fare
          in: body
          schema:
            type: object
            properties:
              account_number:
                type: string
                minLength: 1
                default:  "SAMIRA"
              customer_number:
                type: integer
                format: int32     
                default: 0
      responses:
        200:
          description: success
          schema:
            $ref: '#/definitions/AccountCheckResponse'

        400:
          description: Error 
        default:
          description: Unexpected error
          schema:
            $ref: '#/definitions/Error'        

  /update_payment_type/:
    post:
      tags: [CWEBS]
      operationId: app.update_payment_type
      summary: update_fare_amount
      description: update_fare_amount        
      parameters:
        - name: fare
          in: body
          schema:
            type: object
            properties:
              flat_rate:
                type: integer
                format: int32
              fare_number:
                type: string                  
      responses:
        200:
          description: success
        400:
          description: Error 
        default:
          description: Unexpected error
          schema:
            $ref: '#/definitions/Error'  

  /zone_by_gps/:
    post:
      tags: [CWEBS, zone]
      operationId: app.zone_by_gps
      summary: zone vehicles
      description: zone for given lat, lon and fleet/      
      parameters:
        - name: position
          in: body
          schema:
            $ref: '#/definitions/ZonePosition'  
             
      responses:
        200:
          description: success
        400:
          description: Error 
        default:
          description: Unexpected error
          schema:
            $ref: '#/definitions/Error' 

  /system_status/:
    get:
      tags: [CWEBS, system]
      operationId: app.system_status
      summary: system status
      description:  system status
    
      responses:
        200:
          description: Return system status
          schema:
            type: string
        default:
          description: Unexpected error
          schema:
            $ref: '#/definitions/Error'            
      

definitions:
  DeviceEmergency:
    properties:
      taxi:
        type: integer
        format: int32
        minimum: 1                
        default: 8080
      operator_id:
        type: integer
        format: int32
        minimum: 1000
        default: 1001
      fleet:
        type: integer
        format: int32
        minimum: 0
        default: 2

  DriverMsg:
    required:
      - driver_id
      - operator_id
      - mesg
      - company_id
    properties:        
        driver_id:
          type: integer
          format: int32
          minimum: 1  
          default: 999
        operator_id: 
          type: integer       
          format: int32
          minimum: 1                 
          default: 999
        mesg:
          type: array
          items: 
            type: string
            minItems: 2
        company_id:
          type: integer
          format: int32
          minimum: 1         
          default: 999
        farenumber:
          type: string 
          pattern: "[0-9]{4,15}"
          minLength: 4
          maxLength: 15        
          default: "1234"
        driver_name:
          type: string
          minLength: 2
        operator_name:
          type: string
          minLength: 2
        zone:
          type: integer
          default: 17

  FareCreationRequiredDetails:   
    properties:
      pick_up_city:
        type: string
        minLength: 2
      fleet_number:
        type: integer
        format: int32
        minimum: 0
        maximum: 64
      pick_up_lat:
        type: number
        format: double
        minimum: -90.0
        maximum: 90.0
      pick_up_lng:
        type: number
        format: double
        minimum: -180.0
        maximum: 180.0

  FareCreation:
    type: object
    required:
      - pick_up_city
      - fleet_number
      - pick_up_lat
      - pick_up_lng
    properties:
      pick_up_city:
        type: string
        minLength: 2
      fleet_number:
        type: integer
        format: int32        
        minimum: 0        
        maximum: 64
        default: 2
      pick_up_lat:
        type: number
        format: double
        minimum: -90.0
        maximum: 90.0
      pick_up_lng:
        type: number
        format: double
        minimum: -180.0
        maximum: 180.0
    allOf:
     - $ref: "#/definitions/FareDetails"  
     - $ref: "#/definitions/ViaAddress"           
 
  FareDetails:   
    properties:
      pick_up_city:
        type: string
        minLength: 2
      fleet_number:
        type: integer
        format: int32
        minimum: 0
        maximum: 64
        default: 2
      pick_up_lat:
        type: number
        format: double
        minimum: -90.0
        maximum: 90.0
      pick_up_lng:
        type: number
        format: double
        minimum: -180.0
        maximum: 180.0
      account_number: 
        type: string 
      bid_call:
        type: string
      bid_info:
        type: array
        items:
          type: string
      customer_number:
        type: string 
      callout_not_allowed:
        type: string
      contact_name:
        type: string 
      driver_preference:
        type: array
        items:
          type: integer
          format: int32
          maxItems: 16
      flat_rate:
        type: string
      dest_building_type:
        type: string
      dest_zone:
        type: integer
        format: int32
      destination_street_name: 
        type: string 
      destination_apartment_number: 
        type: string 
      destination_apartment_code: 
        type: string 
      destination_street_number: 
        type: string 
      destination_city:
        type: string 
      destination_building_name:
        type: string 
      destination_lat:
        type: number          
        format: double
        minimum: -90.0
        maximum: 90.0          
      destination_lng: 
        type: number
        format: double
        minimum: -180.0
        maximum: 180.0    
      driver_id:
          type: integer
          format: int32
          minimum: 1        
          default: 8080
      estimated_mileage:
        type: integer
        format: int32
      exclude_ivr:
        type: string
      fare_type:
        type: string 
      force_zone:
        type: string
      is_corporate_account:
        type: boolean
      is_flat_rate:
        type: boolean
      local_call:
        type: string
      dispatch_priority:
        type: integer
        format: int32 
      mobile:
        type: string 

      number_of_jobs:
        type: integer
        format: int32

      no_service:
        type: string
 
      order_id:
        type: string
        pattern: "[0-9a-zA-Z]{1,11}"
        minLength: 1
        maxLength: 11

      operator_id: 
        type: integer       
        format: int32
        minimum: 1     
        default: 1075            

      pickup_datetime:
        type: string

      pick_up_building_type:
        type: string

      priority_call:
        type: string

   
      orig_time:
        type: string


      payment_method:
        type: string

      passenger_name: 
        type: string 
        pattern: "[0-9a-zA-Z]{1,32}"

      pick_up_building_name:
        type: string 

      pick_up_apartment_number:
        type: string 

      pick_up_apartment_code:
        type: string 

      pick_up_street_number:
        type: string 

      pick_up_street_name:
        type: string 

      pick_up_zip_code:
        type: string 
      pick_up_passengers:
        type: integer
        format: int32          
    
      phone:
        type: string 

      prompts: 
        type: array
        items:
          type: string 

      quick_return:
        type: string

      remarks:
        type: array
        items:
          type: string
          minItems: 4
          maxItems: 4          

      restricted_code:
        type: string

      signature_required:
        type: string 

      tip_amount:
        type: string

      txt_back:
        type: string 
  
      vehicle_number:
        type: integer
        format: int32
        minimum: 1   
        default: 9090     

      vehicle_preference:
        type: array
        items:
          type: integer
          format: int32
          maxItems: 16
      vip_number:
        type: integer
        format: int32
        minimum: 0
        default: 1


  FareCreatedData:
    required:
      - message
      - zone
      - job_number
      - fare_type
    properties:
      message:
        type: string
      zone:
        type: integer
      job_number:
        type: string
      fare_type:
        type: string

  FareCreated:
    required:
      - status
      - result
    properties:
      status:
        type: string
      result:       
          $ref: "#/definitions/FareCreatedData"          

  FareModifyCancel:
    required:
      - fare_number
    properties:    
      fare_number:
        type: string
        default: "1234"
      fare_type:
        type: string
        default: "immediate" 

  FareModification:
      allOf:       
          - $ref: "#/definitions/FareDetails"        
          - $ref: "#/definitions/FareModifyCancel"
          - $ref: "#/definitions/ViaAddress"       

  FareCancelation:
    type: object
    required:
      - fare_number
    properties:
      fare_number:
        type: string
        default: "1234"
      fare_type:
        type: string
        default: "immediate"
      cancel_code:
        type: integer
        format: int32
      cancel_reason:
        type: string

  FareCanceledData:
    required:
      - message   
      - job_number
      - fare_type
    properties:
      message:
        type: string 
      job_number:
        type: string
      fare_type:
        type: string

  FareCanceled:
    required:
      - status
      - result
    properties:
      status:
        type: string
      result:       
          $ref: "#/definitions/FareCanceledData"          

  UpdateFare:
    required:
      - fare_number
      - action 
      - reason
      - operator_id
    properties:
      fare_number:
        type: string
        default:  "9243"
      action:
        type: string 
        enum:
          - reject no show
          - accept no show
          - keep no show
          - cancel
        default: "accept no show"
      cancel_code:
        type: integer
        format: int32
        default: 12
      reason:
        type: string
        default: "entered by agent"
      operator_id:
        type: integer
        format: int32
        default: 1001
      operator_name:
        type: string
        default: "supervisor"
      taxi:
        type: integer
        format: int32
        default: 8080
      fleet:
        type: integer
        format: int32
        default: 2

  VehicleMsg:
    required:
      - taxi
      - operator_id
      - mesg
      - company_id
    properties:        
        taxi:
          type: integer
          format: int32
          minimum: 1
          default: 8080
        operator_id: 
          type: integer       
          format: int32
          minimum: 1          
          default: 1001              
        mesg:
          type: array
          items: 
            type: string
            minItems: 2
        company_id:
          type: integer
          format: int32
          minimum: 1          
          default: 1    
        farenumber:
          type: string           
          minLength: 4
          maxLength: 64        
        driver_name:
          type: string
          minLength: 2
        operator_name:
          type: string
          minLength: 2
        zone:
          type: integer
          format: int32
          minimum: 0
          default: 1              

  FleetMsg:
    required:
      - fleet
      - operator_id
      - mesg
      - company_id
    properties:        
        fleet:
          type: integer
          format: int32
          minimum: 0
          maximum: 2000
          default: 2
        operator_id: 
          type: integer       
          format: int32
          minimum: 1    
          default: 1001             
        mesg:
          type: array
          items: 
            type: string
            minItems: 2
        company_id:
          type: integer
          format: int32
          minimum: 1   
          default: 1           
        operator_name:
          type: string
          minLength: 2
        zone:
          type: integer
          format: int32
          minimum: 0
          maximum: 64
          default: 1    

  ActionDriverData:
    required:
      - driver_id         
      - company_id         
      - action 
    properties:        
        driver_id:
          type: integer
          format: int32
          minimum: 1
          default: 8888
        company_id: 
          type: integer       
          format: int32
          minimum: 1                 
          default: 1
        action:       
          type: string
          default: "modify"
        db_action_id:
          type: integer
          format: int32
          minimum: 1
          default: 1          
        msg_id:
          type: integer       
          format: int32
          default: 1
    
  ActionVehicleData:
    required:
      - vehicle_id         
      - company_id         
      - action 
    properties:        
        vehicle_id:
          type: integer
          format: int32
          minimum: 1
          default: 8888
        company_id: 
          type: integer       
          format: int32
          minimum: 1  
          default: 1               
        action:       
          type: string
          default: "modify"
        msg_for_driver:
          type: string
        msg_for_dispatch:
          type: string          
        suspension_datetime_start:
          type: string
        suspension_datetime_end:
          type: string
        authority_id:
            type: integer          
            format: int32
            default: 1001
        db_action_id:
          type: integer
          format: int32
          minimum: 1          
          default: 1
        msg_id:
          type: integer       
          format: int32
          default: 1


  ActionFleetData:
    required:
      - fleet         
      - company_id         
      - action 
    properties:        
        fleet:
          type: integer
          format: int32
          minimum: 1
          default: 2
        company_id: 
          type: integer       
          format: int32
          minimum: 1                 
          default: 1
        action:       
          type: string
          enum:
            - modify
            - add
          default: modify
        name:
          type: string         
        operator_id:
          type: integer       
          format: int32
          default: 1001
        operator_name:
          type: string
          default: "supervisor 100"

  ActionSupervisorData:
    required:
      - driver_id         
      - company_id         
      - action 
    properties:        
        driver_id:
          type: integer
          format: int32
          minimum: 1
          default: 8888
        company_id: 
          type: integer       
          format: int32
          minimum: 1  
          default: 1               
        action:       
          type: string
          enum:
            - suspend
            - reinstate
            - modify
          default: "modify"
        msg_for_driver:
          type: string
        msg_for_dispatch:
          type: string          
        suspension_datetime_start:
          type: string
        suspension_datetime_end:
          type: string
        authority_id:
            type: integer          
            format: int32            
            default: 1001
        taxi:
          type: integer
          format: int32
          minimum: 1          
          default: 1001
        fleet:
          type: integer
          format: int32
          minimum: 1
          default: 2
        db_action_id:
          type: integer
          format: int32
          minimum: 1          
          default: 1
        msg_id:
          type: integer       
          format: int32
          default: 1

  SuspensionVehicleEntry:
    properties:
      ## SuspensionData (object)
      vehicle_id: 
        type: integer
        format: int32
        default: 8080 
      suspension_datetime_start:
        type: string
      suspension_datetime_end:
        type: string
      authority_id: 
        type: integer
        default: 999      
      suspension_timestamp: 
        type: integer
        default: 147898875
      suspension_reasons:
        type: array
        items:  # [too fast, always late] array[string]
          type: string
          minItems: 2                    
      company_id: 
        type: integer       
        format: int32
        default: 1

  SuspensionDriverEntry:
    properties:
      ## SuspensionData (object)
      driver_id: 
        type: integer
        format: int32
        default: 8080 
      suspension_datetime_start:
        type: string
      suspension_datetime_end:
        type: string
      authority_id: 
        type: integer
        default: 999      
      suspension_timestamp: 
        type: integer
        default: 10 
      suspension_reasons:
        type: array
        items:  # [too fast, always late] array[string]
          type: string
          minItems: 2                    
      company_id: 
        type: integer       
        format: int32
        default: 1
 
  SuspensionVehicleListResponse:
    properties:
      status: 
        type : string
      result:  
        $ref: "#/definitions/SuspensionVehicleMessageContainer"

  SuspensionDriverListResponse:
    properties:
      status: 
        type : string
      result:                
        $ref: "#/definitions/SuspensionDriverMessageContainer"

  SuspensionDriverMessageContainer:
    properties:
      number_of_drivers:
        type: integer
      message:
        type: string
      drivers:
        type: array
        items: 
          $ref: "#/definitions/SuspensionDriverEntry"      

  SuspensionVehicleMessageContainer:
    properties:
      number_of_vehicles:
        type: integer
      message:
        type: string
      vehicles:
        type: array
        items: 
            $ref: "#/definitions/SuspensionVehicleEntry"      

  AccountPrompt:
    properties:
      prompts:
        type: array
        items:
          type: string
      account_number:
        type: integer
        format: int32        
      customer_number:
        type: integer
        format: int32


  AccountValidResult:
    properties:
      status:
        type: string
      result:      
        $ref: "#/definitions/AccountResultData"        

  AccountResultData:
    properties:    
      number_of_accounts:
        type: integer
        format: int32
      valid_response:
        type: array
        items:
          type: boolean
      customer_number:
        type: integer
        format: int32        
      valid:
        type: boolean
      account_number:
        type: string
      message:
        type: string

  AccountCheckData:
    properties:    
      number_of_accounts:
        type: integer
        format: int32  
        default: 1 
      customer_number:
        type: integer
        format: int32        
        default: 0
      active:
        type: boolean
        default: true
      voucher:
        type: integer
        format: int32
        default: 0                
      account_number:
        type: string
      account_name:
        type: string        
      message:
        type: string
        default: "OK"


  AccountCheckResponse:
    properties:
      status:
        type: string
      result:
        $ref: '#/definitions/AccountCheckData'

  Accounts:
    properties:
      status:
        type: string
      accounts:
        type: array
        items: 
          $ref: "#/definitions/AccountPrompt"
      message:
        type: string
      number_of_accounts:
        type: integer
        format: int32


  ZonePosition:    
    required:
      - lat
      - lon
      - fleet
    properties:
      lat:
        type: number 
        minimum: -90.0000000
        maximum: 90.000000
        default: 45.341000000
      lon:
        type: number               
        minimum: -180.000000
        maximum: 180.000000        
        default: -75.9150000006
      fleet:              
        type: integer
        format: int32      
        minimum: 0
        maximum: 99999  
        default: 2     

  AddressItem:
    properties:
      latitude:
        type: number 
        minimum: -90.0000000
        maximum: 90.000000
        default: 45.341000000
      longitude:
        type: number               
        minimum: -180.000000
        maximum: 180.000000        
        default: -75.9150000006
      building_name: 
        type: string
        default: "building1"
      apartment_code:
        type: integer 
        default: 234
      apartment_number: 
        type: integer
        default: 678
      street_number: 
        type: integer      
        default: 777
      street_name: 
        type: string      
        default: "street_name1"
      city: 
        type: string      
        default: "city1"
      zone: 
        type: integer     
        default: 1
      zip_code: 
        type: integer      
        default: 6788

  ViaAddress:
    properties:
      extra_address:
        type: array
        items: 
          $ref: "#/definitions/AddressItem"
      extra_address_type:
        type: integer
        format: int32
        default: 1

  Error:
    type: object
    properties:
      code:
        type: integer
        format: int32
      message:
        type: string
      fields:
        type: string



securityDefinitions:
  apiKeySecurity:
    type: apikey # oauth2 # basic, apiKey or oauth2
    name: apiKey # Required for apikey
    flow: accessCode # "implicit", "password", "application" or "accessCode"
    in: header # "query" or "header". Required for apikey
    authorizationUrl: 'https://192.168.56.101:8080/authorization'
    tokenUrl: 'https://192.168.56.101:8080/token'
    scopes:
      admin: Admin scope
      user: User scope
      media: Media scope

security:
  - OauthSecurity:
    - user

